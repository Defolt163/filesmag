(()=>{var e={};e.id=799,e.ids=[799],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},2665:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>o});var a=s(7096),r=s(6132),i=s(7284),n=s.n(i),l=s(2564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["profile",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1047)),"C:\\Users\\Sanders\\Desktop\\EMAG\\on-store\\src\\app\\profile\\cart\\page.js"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,4553)),"C:\\Users\\Sanders\\Desktop\\EMAG\\on-store\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Sanders\\Desktop\\EMAG\\on-store\\src\\app\\profile\\cart\\page.js"],m="/profile/cart/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/profile/cart/page",pathname:"/profile/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},948:(e,t,s)=>{Promise.resolve().then(s.bind(s,9299))},9299:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(3854),r=s(4218),i=s(6070),n=s(2871);s(8907);var l=s(5548),c=s.n(l);function o(e){let t;(0,r.useEffect)(()=>{(0,n.ej)()});let s=(0,n.ej)("UserData"),i="",l="";if(s)try{t=JSON.parse(s),i=null!==t.userId?t.userId:"",l=null!==t.logginin?t.logginin:""}catch(e){console.error(e)}let[o,d]=(0,r.useState)([]);(0,r.useEffect)(()=>{(0,n.a2)().then(e=>d(e))},[]);let[m,u]=(0,r.useState)([]);async function p(){return fetch(`https://65605efe83aba11d99d0b111.mockapi.io/Users/${i}`).then(e=>e.json()).then(e=>e.cart)}(0,r.useEffect)(()=>{o.length>0&&u(o.map(()=>1))},[o]);let h=e=>{if(m[e]>1){let t=[...m];t[e]=t[e]-1,u(t)}},f=e=>{let t=[...m];t[e]=t[e]+1,u(t)},[x,j]=(0,r.useState)([]);(0,r.useEffect)(()=>{p().then(e=>j(e))},[]);let[v,g]=(0,r.useState)([]);function N(){if(x&&null!==x.length&&x.length){let e=x.map(e=>fetch(`https://64f493b1932537f4051a7cde.mockapi.io/Products/${e}`).then(e=>e.json()));Promise.all(e).then(e=>{g(e)}).catch(e=>{console.log(e)})}}(0,r.useEffect)(()=>{N()},[x]);let I=v.filter(e=>x.includes(e.id));async function C(e){let t=await fetch(`https://65605efe83aba11d99d0b111.mockapi.io/Users/${i}`),s=await t.json(),a=s.cart.filter(t=>t!==e);await fetch(`https://65605efe83aba11d99d0b111.mockapi.io/Users/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:a})}),j(a),alert("Удалено")}let P=I.reduce((e,t,s)=>e+t.price*m[s],0);return(0,a.jsxs)("div",{className:"ShoppingCart",children:[(0,a.jsxs)("div",{className:"ShoppingCartWrapper",children:[a.jsx("div",{className:"PageSubHeader PageSubHeaderCart",children:"Корзина"}),(0,a.jsxs)("div",{className:"ShoppingCartTable",children:[a.jsx("div",{className:"ShoppingCartTableItem",children:"Товар"}),a.jsx("div",{className:"ShoppingCartTableItem",children:"Количество"}),a.jsx("div",{className:"ShoppingCartTableItem",children:"Стоимость"}),a.jsx("div",{className:"ShoppingCartTableItem",children:"Итого"})]}),a.jsx("div",{className:"ShoppingCartItems",children:x&&x.length>0?I.map((e,t)=>(0,a.jsxs)("div",{className:"CartItem",children:[(0,a.jsxs)("div",{className:"CartItemProductInfo",children:[a.jsx("div",{style:{background:`url(${e.image}) center center/cover no-repeat`},className:"CartItemImage"}),(0,a.jsxs)("div",{className:"CartItemInfo",children:[(0,a.jsxs)("div",{className:"CartItemInfoBlock",children:[a.jsx("div",{className:"CartItemName",children:e.name}),a.jsx("div",{className:"CartItemColor",children:"Black"}),a.jsx("div",{className:"CartItemSize",children:"Размер: 52"}),a.jsx("div",{className:"CartItemPiece CartItemPieceMobile",children:(0,a.jsxs)("div",{className:"CartItemPieceWrapper",children:[a.jsx("div",{onClick:()=>h(t),className:"CartItemPieceIteration",children:"-"}),a.jsx("div",{className:"PiecesNumber",children:m[t]}),a.jsx("div",{onClick:()=>f(t),className:"CartItemPieceIteration",children:"+"})]})})]}),(0,a.jsxs)("div",{className:"DeleteCartItem DeleteCartItemDesktop",onClick:()=>{C(e.id),N()},children:["Удалить ",a.jsx("i",{className:"fa-solid fa-xmark"})]})]})]}),a.jsx("div",{className:"CartItemPiece CartItemPieceDesktop",children:(0,a.jsxs)("div",{className:"CartItemPieceWrapper",children:[a.jsx("div",{onClick:()=>h(t),className:"CartItemPieceIteration",children:"-"}),a.jsx("div",{className:"PiecesNumber",children:m[t]}),a.jsx("div",{onClick:()=>f(t),className:"CartItemPieceIteration",children:"+"})]})}),(0,a.jsxs)("div",{className:"CartItemPrice CartItemPriceSubTotal",children:[e.price," $"]}),(0,a.jsxs)("div",{className:"CartItemPrice CartItemPriceEnd",children:[e.price*m[t]," $"]})]},e.id)):a.jsx("div",{className:"PageSubHeader",children:!0===l?"Здесь пока ничего нет":(0,a.jsxs)("div",{children:["Чтобы начать покупки вам необходимо ",a.jsx(c(),{href:"/profile/login",children:"Авторизоваться"})," или ",a.jsx(c(),{href:"/profile/register",children:"Зарегистрироваться"})]})})})]}),a.jsx("div",{className:"CartDelivery",children:(0,a.jsxs)("div",{style:{width:`${e.authStatusButton}`},className:"CartDeliveryBlock",children:[(0,a.jsxs)("div",{className:"CartDeliveryTotal",children:["Итог: \xa0  ",(0,a.jsxs)("strong",{children:[P,"$"]})]}),a.jsx("div",{className:"CartDeliverySendButton",children:"Оформить"})]})})]})}function d(){let e;(0,r.useEffect)(()=>{(0,n.ej)()});let t=(0,n.ej)("UserData"),s="";if(t)try{e=JSON.parse(t),s=null!==e.logginin?e.logginin:""}catch(e){console.error(e)}let[l,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[u,p]=(0,r.useState)("");return(0,r.useEffect)(()=>{!0===s?c("block"):c("none"),!0===s?m(""):m("100%"),!0===s?p(""):p("95%")}),(0,r.useEffect)(()=>{document.title="Корзина"},[]),a.jsx("div",{className:"ProfilePage",children:(0,a.jsxs)("div",{className:"container",children:[a.jsx("div",{className:"PageHeader",children:"Мой Аккаунт"}),(0,a.jsxs)("div",{className:"ProfilePageWrapper",children:[a.jsx(i.Z,{authStatus:l,CartItem:"active"}),a.jsx("div",{className:"PageInfo",style:{width:`${d}`},children:a.jsx(o,{authStatusButton:u})})]})]})})}s(4058)},6070:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var a=s(3854),r=s(4218),i=s(5548),n=s.n(i);s(3502);var l=s(2871);function c(e){let t;(0,r.useEffect)(()=>{(0,l.ej)()});let s=(0,l.ej)("UserData");if(s)try{t=JSON.parse(s),null!==t.userId&&t.userId,null!==t.logginin&&t.logginin}catch(e){console.error(e)}let[i,c]=(0,r.useState)([]),[o,d]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(0,l.oY)(e=>{c(e.name),d(e.surname)})},[]),a.jsx("div",{style:{display:`${e.authStatus}`},className:"AccountMenu",children:(0,a.jsxs)("div",{className:"AccountMenuWrapper",children:[(0,a.jsxs)("div",{className:"ProfileName",children:[i," ",o]}),(0,a.jsxs)("div",{className:"AccountMenuItems",children:[a.jsx(n(),{href:"/profile",className:`AccountMenuItem ${e.ProfileItem}`,children:"Аккаунт"}),a.jsx(n(),{href:"/profile/address",className:`AccountMenuItem ${e.AddressItem}`,children:"Адреса"}),a.jsx(n(),{href:"/profile/orders",className:`AccountMenuItem ${e.OrdersItem}`,children:"Заказы"}),a.jsx(n(),{href:"/profile/cart",className:`AccountMenuItem ${e.CartItem}`,children:"Корзина"}),t&&!0===t.logginin?a.jsx(n(),{href:"/",className:`AccountMenuItem ${e.LogOutItem}`,onClick:()=>{document.cookie="undefined=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"},children:"Выйти из аккаунта"}):a.jsx(n(),{href:"/profile/register",className:`AccountMenuItem ${e.LogOutItem}`,children:"Зарегистрироваться или войти"})]})]})})}},1047:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>c});var a=s(5153);let r=(0,a.createProxy)(String.raw`C:\Users\Sanders\Desktop\EMAG\on-store\src\app\profile\cart\page.js`),{__esModule:i,$$typeof:n}=r,l=r.default,c=l},3881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(8531);let r=e=>{let t=(0,a.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}},4058:()=>{},3502:()=>{},8907:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[271,108,323,304],()=>s(2665));module.exports=a})();