(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{2604:function(e,s,t){Promise.resolve().then(t.bind(t,1522))},1522:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var n=t(7437),a=t(2265);t(4162),t(6558),t(344);var r=t(8518),c=t(6161),i=t(1396),d=t.n(i),o=t(4033),l=t(6041);function u(){let e;let s=(0,o.useRouter)();(0,a.useEffect)(()=>{(0,l.ej)()});let t=(0,l.ej)("UserData"),i="";if(t)try{e=JSON.parse(t),i=null!==e.userId?e.userId:"",null!==e.logginin&&e.logginin}catch(e){console.error(e)}let[u,h]=(0,a.useState)([]),[f,m]=(0,a.useState)([]),[p,j]=(0,a.useState)([]),[g,v]=(0,a.useState)([]),[x,N]=(0,a.useState)([]),[I,A]=(0,a.useState)([]),[C,b]=(0,a.useState)([]);(0,a.useEffect)(()=>{(0,l.oY)(e=>{h(e.name),m(e.surname),j(e.phone),v(e.address_city),N(e.address_street),A(e.address_house),b(e.address_apartment)})},[]),(0,a.useEffect)(()=>{document.title="Изменение Адреса"},[]);let S={name:""===u?i.name:u,surname:""===f?i.surname:f,phone:""===p?i.phone:p,address_city:""===g?i.address_city:g,address_street:""===x?i.address_street:x,address_house:""===I?i.address_house:I,address_apartment:""===C?i.address_apartment:C};async function y(){await fetch("https://65605efe83aba11d99d0b111.mockapi.io/Users/".concat(i),{method:"PUT",body:JSON.stringify(S),headers:{"content-type":"application/json"}}).then(e=>{S=e.json(),alert("Изменения применены"),s.push("/profile/address")}).catch(e=>{console.log("Error",e),alert("Произошла ошибка изменения, повторите снова")})}return(0,n.jsx)("div",{className:"ProfilePage",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"PageHeader",children:"Мой Аккаунт"}),(0,n.jsxs)("div",{className:"ProfilePageWrapper",children:[(0,n.jsx)(r.Z,{AddressItem:"active"}),(0,n.jsx)("div",{className:"PageInfo",children:(0,n.jsx)("div",{className:"AccountSettings",children:(0,n.jsxs)("div",{className:"AccountSettingsWrapper",children:[(0,n.jsx)("div",{className:"PageSubHeader PageSubHeaderCart",children:"Адрес"}),(0,n.jsxs)("div",{className:"AddressItem",children:[(0,n.jsxs)("div",{className:"AddressItemFirst",children:[(0,n.jsx)("div",{className:"AddressItemHeader",children:"Режим редактирования"}),(0,n.jsx)(d(),{href:"/profile/address",className:"AddressItemRedactorBtn",children:(0,n.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,n.jsxs)("div",{className:"AddressClientInfo",children:[(0,n.jsx)("div",{className:"ClientInfoAddressItem",children:"Имя:"}),(0,n.jsx)(c.Z,{placeholder:u,value:u,onChange:e=>h(e.target.value)}),(0,n.jsx)("div",{className:"ClientInfoAddressItem",children:"Фамилия"}),(0,n.jsx)(c.Z,{placeholder:f,value:f,onChange:e=>m(e.target.value)}),(0,n.jsx)("div",{className:"ClientInfoAddressItem",children:"Телефон:"}),(0,n.jsx)(c.Z,{placeholder:p,value:p,onChange:e=>j(e.target.value)}),(0,n.jsx)("div",{className:"ClientInfoAddressItem",children:"Город:"}),(0,n.jsx)(c.Z,{placeholder:g,value:g,onChange:e=>v(e.target.value)}),(0,n.jsx)("div",{className:"ClientInfoAddressItem",children:"Улица:"}),(0,n.jsx)(c.Z,{placeholder:x,value:x,onChange:e=>N(e.target.value)}),(0,n.jsxs)("div",{className:"HouseEditBlock",children:[(0,n.jsxs)("div",{className:"HouseEditItem",children:[(0,n.jsx)("div",{className:"HouseEditHeader",children:"Дом:"}),(0,n.jsx)(c.Z,{placeholder:I,value:I,onChange:e=>A(e.target.value)})]}),(0,n.jsxs)("div",{className:"HouseEditItem",children:[(0,n.jsx)("div",{className:"HouseEditHeader",children:"Квартира:"}),(0,n.jsx)(c.Z,{placeholder:C,value:C,onChange:e=>b(e.target.value)})]})]})]}),(0,n.jsx)("div",{className:"SaveChangesButton",onClick:()=>{y()},children:"Сохранить изменения"})]})]})})})]})]})})}},8518:function(e,s,t){"use strict";t.d(s,{Z:function(){return d}});var n=t(7437),a=t(2265),r=t(1396),c=t.n(r);t(7347);var i=t(6041);function d(e){let s;(0,a.useEffect)(()=>{(0,i.ej)()});let t=(0,i.ej)("UserData");if(t)try{s=JSON.parse(t),null!==s.userId&&s.userId,null!==s.logginin&&s.logginin}catch(e){console.error(e)}let[r,d]=(0,a.useState)([]),[o,l]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(0,i.oY)(e=>{d(e.name),l(e.surname)})},[]),(0,n.jsx)("div",{style:{display:"".concat(e.authStatus)},className:"AccountMenu",children:(0,n.jsxs)("div",{className:"AccountMenuWrapper",children:[(0,n.jsxs)("div",{className:"ProfileName",children:[r," ",o]}),(0,n.jsxs)("div",{className:"AccountMenuItems",children:[(0,n.jsx)(c(),{href:"/profile",className:"AccountMenuItem ".concat(e.ProfileItem),children:"Аккаунт"}),(0,n.jsx)(c(),{href:"/profile/address",className:"AccountMenuItem ".concat(e.AddressItem),children:"Адреса"}),(0,n.jsx)(c(),{href:"/profile/orders",className:"AccountMenuItem ".concat(e.OrdersItem),children:"Заказы"}),(0,n.jsx)(c(),{href:"/profile/cart",className:"AccountMenuItem ".concat(e.CartItem),children:"Корзина"}),s&&!0===s.logginin?(0,n.jsx)(c(),{href:"/",className:"AccountMenuItem ".concat(e.LogOutItem),onClick:()=>{document.cookie="undefined=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"},children:"Выйти из аккаунта"}):(0,n.jsx)(c(),{href:"/profile/register",className:"AccountMenuItem ".concat(e.LogOutItem),children:"Зарегистрироваться или войти"})]})]})})}},6041:function(e,s,t){"use strict";let n;t.d(s,{Ej:function(){return o},Xq:function(){return d},a2:function(){return i},ej:function(){return u},oY:function(){return l}});let a=u("UserData"),r="",c="";if(a)try{n=JSON.parse(a),r=null!==n.userId?n.userId:"",c=null!==n.logginin?n.logginin:""}catch(e){console.error(e)}async function i(){return fetch("https://64f493b1932537f4051a7cde.mockapi.io/Products").then(e=>e.json()).then(e=>e)}function d(e){!0===c?fetch("https://65605efe83aba11d99d0b111.mockapi.io/Users/".concat(r),{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(s=>{let t=s.cart||[],n=[...t,e];return fetch("https://65605efe83aba11d99d0b111.mockapi.io/Users/".concat(r),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:n})})}).then(e=>e.json(),alert("Добавлено")).catch(e=>{console.error(e)}):alert("Вам необходимо авторизоваться")}async function o(e){await fetch("https://65605efe83aba11d99d0b111.mockapi.io/Users/".concat(r)).then(e=>e.json()).then(s=>{e(s)})}async function l(e){await fetch("https://65605efe83aba11d99d0b111.mockapi.io/Users/".concat(r)).then(e=>e.json()).then(s=>{e(s)})}function u(e){{let s=e+"=",t=decodeURIComponent(document.cookie).split(";");for(let e=0;e<t.length;e++){let n=t[e];for(;" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(s))return n.substring(s.length,n.length)}}return""}},6558:function(){},344:function(){},7347:function(){},4162:function(){},4033:function(e,s,t){e.exports=t(94)}},function(e){e.O(0,[176,161,971,472,744],function(){return e(e.s=2604)}),_N_E=e.O()}]);